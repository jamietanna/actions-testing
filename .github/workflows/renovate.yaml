name: Renovate
on:
  push: {}
  workflow_dispatch: {}
permissions:
  contents: read
jobs:
  renovate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/cache@v3
        id: baseDir
        with:
          # managed in config.js
          path: /tmp/renovate-baseDir
          key: renovate-baseDir-${{ runner.os }}
          restore-keys: renovate-baseDir-${{ runner.os }}

      - uses: actions/cache@v3
        id: cacheDir
        with:
          # managed in config.js
          path: /tmp/renovate-cacheDir
          key: renovate-cacheDir-${{ runner.os }}

      - name: run
        run: |
          id
          whoami
          # ls -al /tmp/renovate*
          # chmod 777 /tmp/renovate* -R # TODO raise

      - name: Checkout
        uses: actions/checkout@e2f20e631ae6d7dd3b768f56a5d2af784dd54791

      - name: Self-hosted Renovate
        uses: jamietanna/github-action@d29f0c91898acf59ab4321dd851297787f300aca
        with:
          configurationFile: config.js
          token: 'x-access-token:${{ secrets.PAT }}'
